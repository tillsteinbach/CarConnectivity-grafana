{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 3,
  "links": [
    {
      "asDropdown": true,
      "icon": "external link",
      "includeVars": true,
      "keepTime": false,
      "tags": [
        "carconnectivity"
      ],
      "targetBlank": false,
      "title": "Dashboards",
      "tooltip": "",
      "type": "dashboards",
      "url": ""
    }
  ],
  "liveNow": true,
  "panels": [
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Image of the car ${VIN:text} with VIN ${VIN:raw}",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 4,
        "w": 3,
        "x": 0,
        "y": 0
      },
      "id": 7,
      "options": {
        "SVGBaseFix": false,
        "add100Percentage": false,
        "calcsMutation": "none",
        "centerAlignContent": true,
        "codeData": "{\n  \"text\": \"Random text\"\n}",
        "css": "",
        "dynamicData": false,
        "dynamicFieldDisplayValues": false,
        "dynamicHtmlGraphics": true,
        "dynamicProps": false,
        "html": "<a id='carlink' target=”_blank”>\n<img src=\"\" id='carimage' style='max-height: 100%; max-width: 100%'/>\n</a>",
        "onInit": "",
        "onInitOnResize": false,
        "onRender": "const vin = getTemplateSrv().replace(`$VIN`);\nconst carconnectivity_url = getTemplateSrv().replace(`$carconnectivity_url`);\nconst carimage = htmlNode.querySelector('#carimage');\nconst carlink = htmlNode.querySelector('#carlink');\n\nconst filteredSeriesImage = data.series.filter((series) => series.name == 'A');\njsonImage = null;\nif(filteredSeriesImage.length > 0 && filteredSeriesImage[0].fields != null && filteredSeriesImage[0].fields.length > 2){\n  carimage.src = \"data:\"+filteredSeriesImage[0].fields[2].values.get(0)+\";\"+filteredSeriesImage[0].fields[1].values.get(0)+\",\"+filteredSeriesImage[0].fields[0].values.get(0)\n}\nelse {\n  carimage.src = carconnectivity_url+'/garage/'+vin+'-car.png?fallback=icons/vehicle.png';\n}\n\n\ncarlink.href = carconnectivity_url+'/garage/'+vin+'/';",
        "overflow": "visible",
        "panelupdateOnMount": true,
        "reduceOptions": {
          "calcs": []
        },
        "renderOnMount": true,
        "rootCSS": "",
        "useGrafanaScrollbar": true
      },
      "pluginVersion": "2.2.3",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN-car.png.json?fallback=icons/vehicle.png",
          "urlPath": "/garage/$VIN-car.png.json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "$VIN",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Last time data was received from the car",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 3,
        "y": 0
      },
      "id": 4,
      "options": {
        "colorMode": "none",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "max"
          ],
          "fields": "/^Update$/",
          "values": false
        },
        "showPercentChange": false,
        "text": {},
        "textMode": "value",
        "wideLayout": true
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "upd",
              "text": "Update",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN.domains..carCapturedTimestamp",
              "language": "jsonpath",
              "name": "Time"
            }
          ],
          "filters": [],
          "format": "dataframe",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "Updates",
          "root_selector": "**[$exists(upd)]^(>upd)[0]",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Last Data From Car",
      "transformations": [
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "Time"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Current parking position if available. Not all cars provide a parking position.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              }
            ]
          },
          "unit": "degree"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 17,
        "w": 7,
        "x": 11,
        "y": 0
      },
      "id": 2,
      "maxDataPoints": 1,
      "options": {
        "basemap": {
          "config": {},
          "name": "Layer 0",
          "type": "osm-standard"
        },
        "controls": {
          "mouseWheelZoom": true,
          "showAttribution": true,
          "showDebug": false,
          "showMeasure": false,
          "showScale": true,
          "showZoom": true
        },
        "layers": [
          {
            "config": {
              "showLegend": false,
              "style": {
                "color": {
                  "fixed": "blue"
                },
                "opacity": 1,
                "rotation": {
                  "fixed": 0,
                  "max": 360,
                  "min": -360,
                  "mode": "mod"
                },
                "size": {
                  "fixed": 10,
                  "max": 15,
                  "min": 2
                },
                "symbol": {
                  "fixed": "img/icons/parking.svg",
                  "mode": "fixed"
                },
                "textConfig": {
                  "fontSize": 12,
                  "offsetX": 0,
                  "offsetY": 0,
                  "textAlign": "center",
                  "textBaseline": "middle"
                }
              }
            },
            "location": {
              "latitude": "Latitude",
              "longitude": "Longitude",
              "mode": "coords"
            },
            "name": "Parking position",
            "tooltip": true,
            "type": "markers"
          }
        ],
        "tooltip": {
          "mode": "details"
        },
        "view": {
          "allLayers": true,
          "id": "fit",
          "lat": 0,
          "lon": 0,
          "noRepeat": false,
          "zoom": 18
        }
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "latitude.val",
              "text": "Latitude",
              "type": "number"
            },
            {
              "selector": "longitude.val",
              "text": "Longitude",
              "type": "number"
            },
            {
              "selector": "latitude.upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "position_location.display_name.val",
              "text": "Location",
              "type": "string"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN.domains.parking.parkingPosition.latitude",
              "name": "Latitude",
              "type": "number"
            },
            {
              "jsonPath": "$.vehicles.$VIN.domains.parking.parkingPosition.longitude",
              "language": "jsonpath",
              "name": "Longitude",
              "type": "number"
            },
            {
              "jsonPath": "$.vehicles.$VIN.domains.parking.parkingPosition.carCapturedTimestamp",
              "language": "jsonpath",
              "name": "Time",
              "type": "time"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "position",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Parking Position",
      "transparent": true,
      "type": "geomap"
    },
    {
      "datasource": {
        "type": "postgres",
        "uid": "CarConnectivity-PostgreSQL-provisioned"
      },
      "description": "Shows information for the usage of CarConnectivity",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 17,
        "w": 6,
        "x": 18,
        "y": 0
      },
      "id": 15,
      "options": {
        "SVGBaseFix": false,
        "add100Percentage": true,
        "calcsMutation": "none",
        "centerAlignContent": false,
        "codeData": "{\n  \"text\": \"Random text\"\n}",
        "css": "",
        "dynamicData": false,
        "dynamicFieldDisplayValues": false,
        "dynamicHtmlGraphics": true,
        "dynamicProps": false,
        "html": "<div>\n  <div id=\"newsDiv\" style=\"display: none;\">\n    <h2>News:</h2>\n  </div>\n\n  <div id=\"logDiv\" style=\"display: none;\">\n    <h2>Recent Events:</h2>\n    <ul id=\"logsList\" style=\"list-style-type:none\">\n    <ul>\n  </div>\n</div>",
        "onInit": "",
        "onInitOnResize": false,
        "onRender": "const logsDiv = htmlNode.getElementById('logDiv');\nconst logsList = htmlNode.getElementById('logsList');\nlogsDiv.style.display = 'none'\nwhile (logsList.firstChild) {\n    logsList.firstChild.remove()\n}\n\nfunction addLog(html) {\n  logsDiv.style.display = ''\n  log = document.createElement(\"li\")\n  var template = document.createElement('template');\n  html = html.trim();\n  template.innerHTML = html;\n  log.append(template.content);\n  logsList.appendChild(log)\n}\n\nfunction getMetric(seriesName, metricName) {\n  const filteredSeries = data.series.filter((series) => series.refId == seriesName);\n  if(filteredSeries.length > 0 && filteredSeries[0].fields != null\n        && filteredSeries[0].fields.length > 0){\n    const filteredFields = filteredSeries[0].fields.filter((fields) => fields.name == metricName)\n    if(filteredFields.length > 0){\n      return filteredFields[0].values.get(0)\n    }\n  }\n  return null\n}\n\nconst carconnectivity_url = getTemplateSrv().replace(`$carconnectivity_url`);\nconst vin = getTemplateSrv().replace(`$VIN`);\nif(carconnectivity_url == null || carconnectivity_url== ''){\n  addWarning(\"You have to set the URL for the VWsFriend user interface correctly: Go to the user interface on port 4000 and select \\\"Database\\\" > \\”Connection Settings\\\"\")\n}\n//Log\nconst filteredSeries = data.series.filter((series) => series.refId == 'log');\n  if(filteredSeries.length > 0 && filteredSeries[0].fields != null\n        && filteredSeries[0].fields.length > 0){\n    const filteredFields = filteredSeries[0].fields.filter((fields) => (fields.name == 'logtime' || fields.name == 'log'))\n    timeZone = htmlGraphics.props.timeZone;\n    if(filteredFields.length == 2){\n      time = filteredFields[0];\n      logstring = filteredFields[1];\n      var options = { dateStyle: 'short' };\n      if(timeZone!='browser'){\n        options.timeZone = timeZone;\n      }\n      var timeOptions = { timeStyle: 'short' };\n      if(timeZone!='browser'){\n        timeOptions.timeZone = timeZone;\n      }\n      var beforedate = new Intl.DateTimeFormat('default', options).format(new Date());\n      for(let i = 0; i < time.values.length; i++) {\n        var date = new Intl.DateTimeFormat('default', options).format(new Date(time.values.get(i)));\n        if(beforedate != date){\n          addLog('<b>'+date+'</b>');\n        }\n        beforedate = date;\n        var timestr = new Intl.DateTimeFormat('default', timeOptions).format(new Date(time.values.get(i)));\n        addLog(timestr+\": \"+logstring.values.get(i));\n      }\n    }\n  }",
        "overflow": "auto",
        "panelupdateOnMount": true,
        "reduceOptions": {
          "calcs": []
        },
        "renderOnMount": true,
        "rootCSS": "",
        "useGrafanaScrollbar": true
      },
      "pluginVersion": "2.2.3",
      "targets": [
        {
          "datasource": {
            "type": "postgres",
            "uid": "CarConnectivity-PostgreSQL-provisioned"
          },
          "editorMode": "code",
          "format": "table",
          "group": [],
          "hide": false,
          "metricColumn": "none",
          "rawQuery": true,
          "rawSql": "SELECT\n  logtime,\n  log FROM\n(\n  (SELECT\n    session_start_date AS logtime,\n    'charging started' AS log\n  FROM charging_sessions\n  WHERE session_start_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY session_start_date DESC\n  LIMIT 3)\n  UNION\n  (SELECT\n    plug_connected_date AS logtime,\n    'charging cable connected' AS log\n  FROM charging_sessions\n  WHERE plug_connected_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY plug_connected_date DESC\n  LIMIT 3)\n  UNION\n  (SELECT\n    plug_locked_date AS logtime,\n    'charging connector locked' AS log\n  FROM charging_sessions\n  WHERE plug_locked_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY plug_locked_date DESC\n  LIMIT 3)\n  UNION\n    (SELECT\n    session_end_date AS logtime,\n    'charging ended' AS log\n  FROM charging_sessions\n  WHERE session_end_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY session_end_date DESC\n  LIMIT 3)\n  UNION\n  (SELECT\n    plug_disconnected_date AS logtime,\n    'charging cable disconnected' AS log\n  FROM charging_sessions\n  WHERE plug_disconnected_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY plug_disconnected_date DESC\n  LIMIT 3)\n  UNION\n  (SELECT\n    plug_unlocked_date AS logtime,\n    'charging connector unlocked' AS log\n  FROM charging_sessions\n  WHERE plug_unlocked_date IS NOT NULL AND vin = '${VIN}'\n  ORDER BY plug_unlocked_date DESC\n  LIMIT 3)\n   UNION\n  (SELECT\n    \"start_date\" AS logtime,\n    'trip started' AS log\n  FROM trips\n  WHERE \"start_date\" IS NOT NULL AND vin = '${VIN}'\n  ORDER BY \"start_date\" DESC\n  LIMIT 10)\n  UNION\n  (SELECT\n    \"destination_date\" AS logtime,\n    'trip ended' AS log\n  FROM trips\n  WHERE \"destination_date\" IS NOT NULL AND vin = '${VIN}'\n  ORDER BY \"destination_date\" DESC\n  LIMIT 10)\n  UNION\n  (SELECT\n  \"first_date\" AS logtime,\n  CASE WHEN \"state\"= 'OFF' THEN 'climatisation stopped'\n       WHEN \"state\"= 'HEATING' THEN 'climatisation heating'\n       WHEN \"state\"= 'COOLING' THEN 'climatisation cooling'\n       WHEN \"state\"= 'VENTILATION' THEN 'climatisation ventilating'\n       ELSE 'unkown'\n  END AS log\n  FROM climatization_states\n  WHERE \"first_date\" IS NOT NULL AND vin = '${VIN}'\n  ORDER BY \"first_date\" DESC\n  LIMIT 10)\n) AS logs\nORDER BY 1 DESC\nLIMIT 20",
          "refId": "log",
          "select": [
            [
              {
                "params": [
                  "\"maximumChargePower_kW\""
                ],
                "type": "column"
              }
            ]
          ],
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          },
          "table": "settings",
          "timeColumn": "connected",
          "timeColumnType": "timestamp",
          "where": []
        }
      ],
      "title": "Information",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Status of the car ${VIN:text} with VIN ${VIN:raw}",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": 0
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 14,
        "w": 8,
        "x": 3,
        "y": 3
      },
      "id": 14,
      "options": {
        "SVGBaseFix": false,
        "add100Percentage": true,
        "calcsMutation": "standard",
        "centerAlignContent": true,
        "codeData": "{\n  \"text\": \"Random text\"\n}",
        "css": "/* Container holding the image and the text */\n#carcontainer {\n  position: relative;\n  text-align: center;\n  color: white;\n}\n\n.carstatusimage {}\n\n.carimage {}\n\n.carstatuslabel {\n  fill: white;\n  font-size: 1.5em;\n}\n\n.chargercablecharging {\n  stroke-dasharray: 10;\n  animation: dashdraw 4s linear infinite;\n  stroke: green;\n}\n.chargercablechargingSlow {\n  stroke-dasharray: 10;\n  animation: dashdraw 10s linear infinite;\n  stroke: green;\n}\n.chargercablechargingFast {\n  stroke-dasharray: 10;\n  animation: dashdraw 1s linear infinite;\n  stroke: orange;\n}\n@keyframes dashdraw {to {stroke-dashoffset: 200;}}\n\n.chargercableconnected {\n  stroke: gray;\n}\n.chargercableerror {\n  stroke: red;\n}\n.chargercabledisconnected {\n  stroke: none;\n}\n.drivepath {\n  stroke-dasharray: 100 200;\n  stroke-dashoffset: 350;\n  animation: dashdrawdrivepath 1s linear infinite;\n  animation-direction: forward;\n  stroke: rgb(215, 215, 215);\n}\n.drivepath2 {\n  stroke: rgb(215, 215, 215);\n}\n.notdriving {\n  stroke: none;\n}\n@keyframes dashdrawdrivepath {to {stroke-dashoffset: 50;}}",
        "dynamicData": false,
        "dynamicFieldDisplayValues": false,
        "dynamicHtmlGraphics": true,
        "dynamicProps": false,
        "html": "<div id=\"carcontainer\">\n  \n    <svg\n   xmlns=\"http://www.w3.org/2000/svg\"\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n   height=\"100%\" width=\"100%\"\n   viewBox=\"0 0 938 704\" class=\"carstatusimage\">\n  <defs>\n    <filter x=\"0\" y=\"0\" width=\"1\" height=\"1\" id=\"solid\">\n      <feFlood flood-color=\"black\" result=\"bg\" />\n      <feMerge>\n        <feMergeNode in=\"bg\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  </defs>\n    <path id=\"chargercable\" class=\"chargercablecharging\" stroke-linejoin=\"round\" fill=\"none\" stroke-width=\"15\" d=\"m500 430 l1450 0\"/>\n    <path id=\"chargercharging\" class=\"chargercableconnected\" stroke-linejoin=\"round\" fill=\"none\" stroke-width=\"12\" d=\"m500 430 l1450 0\"/>\n    <path id=\"drivepath1\" class=\"drivepath\" stroke-linejoin=\"round\" fill=\"none\" stroke-width=\"15\" d=\"m335 -10 l-40 720\"/>\n    <path id=\"drivepath2\" class=\"drivepath2\" stroke-linejoin=\"round\" fill=\"none\" stroke-width=\"15\" d=\"m595 -10 l40 720\"/>\n    \n    <g style=\"transform: translate(880px, 380px)\">\n\t   <path id=\"externalPower\" d=\"M11.001,30l2.707-16.334H5L11.458,0l9.25,0.123L16.667,8H25L11.001,30z\" fill='none'/>\n    </g>\n\n    <a id='carlink' target=”_blank”>\n      <image id=\"carimage\" x=\"0\" y=\"0\" width=\"938\" height=\"704\" preserveAspectRatio=\"xMidYMid\" class=\"carimage\"/>\n    </a>\n    <circle id=\"plugLed\" cx=\"605\" cy=\"453\" r=\"10\" fill=\"none\"/>\n    <g style=\"transform: translate(730px, 465px)\">\n      <text dx=\"-5\" id=\"chargingTextLabel\" class=\"carstatuslabel\" text-anchor=\"end\"/>\n      <text id=\"chargingStatusLabel\" class=\"carstatuslabel\"/>\n      <text dy=\"1.3em\" id=\"chargingRemainingLabel\" class=\"carstatuslabel\"/>\n      <text dy=\"2.6em\" id=\"chargingGoalLabel\" class=\"carstatuslabel\"/>\n      <text dy=\"3.9em\" id=\"chargingPowerLabel\" class=\"carstatuslabel\"/>\n      <text dy=\"5.2em\" id=\"chargingCurrentLabel\" class=\"carstatuslabel\"/>\n    </g>\n    <g style=\"transform: translate(469px, 330px)\">\n      <text text-anchor=\"middle\" id=\"climatisationTextLabel\" class=\"carstatuslabel\" filter=\"url(#solid)\"/>\n      <text dy=\"1.3em\" text-anchor=\"middle\" id=\"climatisationStatusLabel\" class=\"carstatuslabel\" filter=\"url(#solid)\"/>\n      <text dy=\"2.6em\" text-anchor=\"middle\" id=\"climatisationRemainingLabel\" class=\"carstatuslabel\" filter=\"url(#solid)\"/>\n    </g>\n  </svg>\n  \n</div>",
        "onInit": "",
        "onInitOnResize": false,
        "onRender": "// Used in onRender as it updates every time new data is available\nconst vin = getTemplateSrv().replace(`$VIN`);\nconst carconnectivity_url = getTemplateSrv().replace(`$carconnectivity_url`);\nconst carimage = htmlNode.getElementById('carimage');\nconst carlink = htmlNode.getElementById('carlink');\n\ncarlink.href = carconnectivity_url+'/status/vehicle/'+vin+'/';\n\nconst filteredSeriesImage = data.series.filter((series) => series.name == 'B');\njsonImage = null;\nif(filteredSeriesImage.length > 0 && filteredSeriesImage[0].fields != null && filteredSeriesImage[0].fields.length > 0){\n jsonImage = filteredSeriesImage[0].fields[0].values.get(0);\n const vehicleImage = JSON.parse(jsonImage);\n const imagebase64 = \"data:\"+vehicleImage.type+\";\"+vehicleImage.encoding+\",\"+vehicleImage.data\n carimage.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', imagebase64);\n}\nelse {\n const imageurl = carconnectivity_url+'/status/vehicles/'+vin+'-status.png'\n carimage.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', imageurl);\n}\n\nconst filteredSeries = data.series.filter((series) => series.name == 'A');\nconst json = null;\nif(filteredSeries.length > 0 && filteredSeries[0].fields != null\n && filteredSeries[0].fields.length > 0){\n const json = filteredSeries[0].fields[0].values.get(0);\n const vehicle = JSON.parse(json);\n\n //Charging\n const chargerCable = htmlNode.getElementById('chargercable');\n const chargerCharging = htmlNode.getElementById('chargercharging');\n const plugLed = htmlNode.getElementById('plugLed');\n const externalPower = htmlNode.getElementById('externalPower');\n chargerCable.classList = [\"chargercabledisconnected\"]\n chargerCharging.classList = [\"chargercabledisconnected\"]\n\n const chargingTextLabel = htmlNode.getElementById('chargingTextLabel');\n chargingTextLabel.textContent = '';\n if(vehicle.domains != null && vehicle.domains.charging != null\n && vehicle.domains.charging.chargingStatus != null){\n const chargingTextLabel = htmlNode.getElementById('chargingTextLabel');\n const plugStatus = vehicle.domains.charging.plugStatus;\n if(plugStatus.ledColor != null){\n if(plugStatus.ledColor != 'none' && plugStatus.ledColor != 'unknown'){\n plugLed.setAttribute('fill', plugStatus.ledColor);\n }\n else{\n plugLed.setAttribute('fill', 'none');\n }\n }\n if(plugStatus.plugConnectionState != null){\n if(plugStatus.plugConnectionState == \"connected\"){\n chargerCable.classList = [\"chargercableconnected\"];\n chargingTextLabel.textContent = 'Charging:';\n if(plugStatus.externalPower != null){\n if(plugStatus.externalPower == 'ready' || plugStatus.externalPower == 'active'){\n externalPower.setAttribute('fill', 'yellow');\n }\n else if(plugStatus.externalPower == 'unavailable'){\n externalPower.setAttribute('fill', 'gray');\n }\n else{\n externalPower.setAttribute('fill', 'none');\n }\n }\n }\n else{\n externalPower.setAttribute('fill', 'none');\n }\n }\n else{\n chargingTextLabel.textContent = 'Charging:';\n }\n const chargingStatus = vehicle.domains.charging.chargingStatus;\n if(chargingStatus.chargingState != null){\n const chargingstatusLabel = htmlNode.getElementById('chargingStatusLabel');\n if(plugStatus.plugConnectionState != null){\n if(plugStatus.plugConnectionState == \"connected\"){\n chargerCable.classList = [\"chargercableconnected\"];\n chargingstatusLabel.textContent = chargingStatus.chargingState;\n }\n else{\n chargingstatusLabel.textContent = \"\"\n }\n }\n else{\n chargingstatusLabel.textContent = chargingStatus.chargingState;\n }\n \n if([\"off\", \"readyForCharging\"].includes(chargingStatus.chargingState)){\n chargerCharging.classList = [\"chargercabledisconnected\"];\n }\n else if([\"conservation\", \"charging\", \"chargePurposeReachedAndConservation\"].includes(chargingStatus.chargingState)){\n if(chargingStatus.chargePower_kW < 10){\n chargerCharging.classList = [\"chargercablechargingSlow\"];\n }\n else if(chargingStatus.chargePower_kW > 11){\n chargerCharging.classList = [\"chargercablechargingFast\"];\n }\n else{\n chargerCharging.classList = [\"chargercablecharging\"];\n }\n \n }\n else if([\"chargePurposeReachedAndNotConservationCharging\"].includes(chargingStatus.chargingState)){\n chargerCharging.classList = [\"chargercabledisconnected\"]\n }\n else if([\"error\"].includes(chargingStatus.chargingState)){\n chargerCharging.classList = [\"chargercableerror\"]\n }\n else{\n chargerCharging.classList = [\"chargercabledisconnected\"]\n }\n const chargingRemainingLabel = htmlNode.getElementById('chargingRemainingLabel');\n chargingRemainingLabel.textContent = ''\n const chargingGoalLabel = htmlNode.getElementById('chargingGoalLabel');\n chargingGoalLabel.textContent = ''\n const chargingPowerLabel = htmlNode.getElementById('chargingPowerLabel');\n chargingPowerLabel.textContent = ''\n\n if([\"conservation\", \"charging\", \"chargePurposeReachedAndConservation\"].includes(chargingStatus.chargingState)){\n if(chargingStatus.remainingChargingTimeToComplete_min != null){\n chargingRemainingLabel.textContent = chargingStatus.remainingChargingTimeToComplete_min+'m remaining';\n const chargingSettings = vehicle.domains.charging.chargingSettings;\n if(chargingSettings != null && chargingSettings.targetSOC_pct != null){\n chargingGoalLabel.textContent = ' to reach '+chargingSettings.targetSOC_pct+'% SoC'\n }\n }\n if(chargingStatus.chargePower_kW != null){\n chargingPowerLabel.textContent = chargingStatus.chargePower_kW+'kW Charge Power';\n }\n }\n }\n }\n\n //Climatisation\n const climatisationTextLabel = htmlNode.getElementById('climatisationTextLabel');\n climatisationTextLabel.textContent = '';\n const climatisationStatusLabel = htmlNode.getElementById('climatisationStatusLabel');\n climatisationStatusLabel.textContent = '';\n const climatisationRemainingLabel = htmlNode.getElementById('climatisationRemainingLabel');\n climatisationRemainingLabel.textContent = '';\n if(vehicle.domains != null && vehicle.domains.charging != null\n && vehicle.domains.climatisation.climatisationStatus != null){\n const climatisationStatus = vehicle.domains.climatisation.climatisationStatus;\n if(climatisationStatus.climatisationState != null && climatisationStatus.climatisationState != 'off'){\n climatisationTextLabel.textContent = 'Climatisation';\n const climatisationStatusLabel = htmlNode.getElementById('climatisationStatusLabel');\n climatisationStatusLabel.textContent = climatisationStatus.climatisationState;\n if(climatisationStatus.remainingClimatisationTime_min != null){\n climatisationRemainingLabel.textContent = climatisationStatus.remainingClimatisationTime_min+'m remaining';\n }\n }\n else{\n climatisationTextLabel.textContent = '';\n }\n const climatisationLabel = htmlNode.getElementById('climatisationLabel');\n if(climatisationLabel != null){\n while (climatisationLabel.firstChild) {\n climatisationLabel.firstChild.remove()\n }\n climatisationString.split(\"\\n\").forEach(element => {\n tspan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\")\n tspan.setAttribute('x', 0);\n tspan.setAttribute('dy', \"1.2em\");\n tspan.textContent=element\n climatisationLabel.appendChild(tspan)\n });\n \n climatisationLabel.text = returnString;\n }\n }\n\n //Driving\n const drivePath1 = htmlNode.getElementById('drivepath1');\n drivePath1.classList = [\"notdriving\"]\n const drivePath2 = htmlNode.getElementById('drivepath2');\n drivePath2.classList = [\"notdriving\"]\n if(vehicle.capabilities.parkingPosition != null && (vehicle.capabilities.parkingPosition.status == null || vehicle.capabilities.parkingPosition.status.length == 0)){\n if(vehicle.domains != null && (vehicle.domains.parking == null\n || vehicle.domains.parking.parkingPosition == null)){\n drivePath1.classList = [\"drivepath\"]\n drivePath2.classList = [\"drivepath2\"]\n }\n }\n else if(vehicle.domains != null && vehicle.domains.readiness != null\n && vehicle.domains.readiness.readinessStatus != null){\n const readinessStatus = vehicle.domains.readiness.readinessStatus\n if(readinessStatus.connectionState != null && readinessStatus.connectionState.isActive === true){\n if(vehicle.domains.charging != null && vehicle.domains.charging.plugStatus != null){\n if(vehicle.domains.charging.plugStatus.plugConnectionState != 'connected'){\n drivePath1.classList = [\"drivepath\"]\n drivePath2.classList = [\"drivepath2\"]\n }\n }\n }\n }\n}",
        "overflow": "visible",
        "panelupdateOnMount": true,
        "reduceOptions": {
          "calcs": [
            "lastNotNull",
            "last",
            "first",
            "firstNotNull",
            "min",
            "max",
            "mean",
            "sum",
            "count",
            "range",
            "delta",
            "step",
            "diff",
            "logmin",
            "allIsZero",
            "allIsNull",
            "diffperc"
          ]
        },
        "renderOnMount": true,
        "rootCSS": "",
        "useGrafanaScrollbar": true
      },
      "pluginVersion": "2.2.3",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN",
              "language": "jsonpath",
              "name": "vehicle",
              "type": "string"
            }
          ],
          "method": "GET",
          "queryParams": "",
          "refId": "A",
          "urlPath": "/status/json"
        },
        {
          "cacheDurationSeconds": 30,
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$"
            }
          ],
          "hide": false,
          "method": "GET",
          "queryParams": "",
          "refId": "B",
          "urlPath": "/status/vehicles/$VIN-status.png.json"
        }
      ],
      "title": "Live Status",
      "type": "gapit-htmlgraphics-panel"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Current state of odometer",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "fixed"
          },
          "decimals": 0,
          "mappings": [],
          "max": 100000,
          "min": 0,
          "noValue": "no data from car",
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "green",
                "value": 10
              }
            ]
          },
          "unit": "km"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 3,
        "x": 0,
        "y": 4
      },
      "id": 16,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^Odometer$/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "val",
              "text": "Odometer",
              "type": "number"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "uni",
              "text": "Unit",
              "type": "string"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "vehicles.$VIN.domains.measurements.odometerStatus.odometer",
              "type": "number"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "$.odometer",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Odometer",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "applyTo": {
              "id": "byName",
              "options": "Odometer"
            },
            "configRefId": "A",
            "mappings": [
              {
                "fieldName": "Unit",
                "handlerKey": "unit"
              }
            ]
          }
        }
      ],
      "type": "stat"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Current state of charge",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "max": 100,
          "min": 0,
          "noValue": "no data from car",
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "green",
                "value": 10
              }
            ]
          },
          "unit": "percent"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 3,
        "x": 0,
        "y": 7
      },
      "id": 9,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto",
        "text": {}
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "val",
              "text": "Level",
              "type": "number"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "uni",
              "text": "Unit",
              "type": "string"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "vehicles.$VIN.domains.charging.batteryStatus.currentSOC_pct"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "drives.*[$lowercase(type.val) = \"electric\"].level",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Battery",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "datasource",
        "uid": "-- Mixed --"
      },
      "description": "Current range",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "min": 0,
          "noValue": "no data from car",
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "red",
                "value": 0
              },
              {
                "color": "#EAB839",
                "value": 5
              },
              {
                "color": "green",
                "value": 10
              }
            ]
          },
          "unit": "lengthkm"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 3,
        "x": 0,
        "y": 14
      },
      "id": 11,
      "options": {
        "minVizHeight": 75,
        "minVizWidth": 75,
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "first"
          ],
          "fields": "",
          "values": false
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true,
        "sizing": "auto",
        "text": {}
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "val",
              "text": "Value",
              "type": "number"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "uni",
              "text": "Unit",
              "type": "string"
            }
          ],
          "datasource": {
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN.domains.charging.batteryStatus.cruisingRangeElectric_km",
              "name": "Electric Range"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "hide": false,
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "Range",
          "root_selector": "drives.*[$lowercase(type.val) = \"electric\"].range",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        },
        {
          "columns": [
            {
              "selector": "val",
              "text": "WLTP",
              "type": "number"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "uni",
              "text": "Unit",
              "type": "string"
            }
          ],
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "editorMode": "code",
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "group": [],
          "groupBy": [],
          "hide": false,
          "measurement": "",
          "metricColumn": "none",
          "orderByTime": "ASC",
          "parser": "backend",
          "policy": "default",
          "query": "",
          "queryType": "randomWalk",
          "rawQuery": true,
          "rawSql": "SELECT\n  CASE WHEN vehicles.\"carType\" = 'ELECTRIC' THEN vehicle_settings.\"primary_wltp_range\"::NUMERIC\n  ELSE vehicle_settings.\"secondary_wltp_range\"::NUMERIC END AS \"Electric Range\"\nFROM vehicles\nLEFT JOIN vehicle_settings ON vehicles.vin = vehicle_settings.vehicle_vin\nWHERE\n  vehicles.vin = '$VIN'\n",
          "refId": "WLTP",
          "resultFormat": "time_series",
          "root_selector": "$append(drives.*[$lowercase(type.val) = \"electric\"].range_wltp,{})",
          "select": [
            [
              {
                "params": [
                  "\"totalRange_km\""
                ],
                "type": "column"
              }
            ]
          ],
          "source": "url",
          "sql": {
            "columns": [
              {
                "parameters": [],
                "type": "function"
              }
            ],
            "groupBy": [
              {
                "property": {
                  "type": "string"
                },
                "type": "groupBy"
              }
            ],
            "limit": 50
          },
          "table": "ranges",
          "tags": [],
          "timeColumn": "\"carCapturedTimestamp\"",
          "timeColumnType": "timestamp",
          "type": "json",
          "url": "/garage/$VIN/json",
          "url_options": {
            "data": "",
            "method": "GET"
          },
          "where": [
            {
              "name": "$__timeFilter",
              "params": [],
              "type": "macro"
            },
            {
              "datatype": "varchar",
              "name": "",
              "params": [
                "vehicle_vin",
                "=",
                "'$VIN'"
              ],
              "type": "expression"
            }
          ]
        }
      ],
      "title": "Projected Electric Range",
      "transformations": [
        {
          "id": "configFromData",
          "options": {
            "applyTo": {
              "id": "byName",
              "options": "Range"
            },
            "configRefId": "WLTP",
            "mappings": [
              {
                "fieldName": "WLTP",
                "handlerKey": "max",
                "reducerId": "lastNotNull"
              },
              {
                "fieldName": "Unit",
                "handlerKey": "unit"
              }
            ]
          }
        }
      ],
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Time when charging target is reached",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": 0
              }
            ]
          },
          "unit": "m"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 3,
        "x": 0,
        "y": 21
      },
      "id": 13,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^Value$/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "val",
              "text": "Value",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN.domains.climatisation.climatisationStatus.remainingClimatisationTime_min",
              "type": "number"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "$append($.charging.estimated_date_reached,{})",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Charging Finish Time",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "marcusolsson-json-datasource",
        "uid": "CarConnectivity-live-json-provisioned"
      },
      "description": "Time when climatization is turned off",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "percentage",
            "steps": [
              {
                "color": "green",
                "value": 0
              }
            ]
          },
          "unit": "m"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 3,
        "x": 0,
        "y": 28
      },
      "id": 17,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "percentChangeColorMode": "standard",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "/^Value$/",
          "values": false
        },
        "showPercentChange": false,
        "textMode": "auto",
        "wideLayout": true
      },
      "pluginVersion": "12.3.1",
      "targets": [
        {
          "cacheDurationSeconds": 30,
          "columns": [
            {
              "selector": "val",
              "text": "Value",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            },
            {
              "selector": "upd",
              "text": "Time",
              "timestampFormat": "2006-01-02T15:04:05Z07:00",
              "type": "timestamp"
            }
          ],
          "datasource": {
            "type": "marcusolsson-json-datasource",
            "uid": "CarConnectivity-live-json-provisioned"
          },
          "fields": [
            {
              "jsonPath": "$.vehicles.$VIN.domains.climatisation.climatisationStatus.remainingClimatisationTime_min",
              "type": "number"
            }
          ],
          "filters": [],
          "format": "table",
          "global_query_id": "",
          "method": "GET",
          "parser": "backend",
          "queryParams": "",
          "refId": "A",
          "root_selector": "$append($.climatization.estimated_date_reached,{})",
          "source": "url",
          "type": "json",
          "url": "/garage/$VIN/json",
          "urlPath": "/status/json",
          "url_options": {
            "data": "",
            "method": "GET"
          }
        }
      ],
      "title": "Climatization Finish Time",
      "type": "stat"
    }
  ],
  "preload": false,
  "refresh": "1m",
  "schemaVersion": 42,
  "tags": [
    "carconnectivity"
  ],
  "templating": {
    "list": [
      {
        "datasource": {
          "type": "postgres",
          "uid": "CarConnectivity-PostgreSQL-provisioned"
        },
        "definition": "SELECT \"vin\" || ':' || \"nickname\" || ' (' || \"model\" || ' - ' || \"carType\" || ')' FROM vehicles LEFT JOIN vehicle_settings ON vehicles.VIN = vehicle_settings.vehicle_vin WHERE vehicle_settings.hide IS NOT True ORDER BY vehicle_settings.sorting_order ASC",
        "description": "Select Car if you have multiple cars in your account",
        "includeAll": false,
        "label": "Car",
        "name": "VIN",
        "options": [],
        "query": "SELECT \"vin\" || ':' || \"nickname\" || ' (' || \"model\" || ' - ' || \"carType\" || ')' FROM vehicles LEFT JOIN vehicle_settings ON vehicles.VIN = vehicle_settings.vehicle_vin WHERE vehicle_settings.hide IS NOT True ORDER BY vehicle_settings.sorting_order ASC",
        "refresh": 1,
        "regex": "/(?<value>[A-Z0-9]+):(?<text>.*)/",
        "type": "query"
      },
      {
        "allowCustomValue": false,
        "datasource": {
          "type": "marcusolsson-json-datasource",
          "uid": "CarConnectivity-Env-json-provisioned"
        },
        "definition": "",
        "hide": 2,
        "name": "carconnectivity_url",
        "options": [],
        "query": {
          "cacheDurationSeconds": 86400,
          "fields": [
            {
              "jsonPath": "$.carconnectivity_ui_url"
            }
          ],
          "method": "GET",
          "queryParams": "",
          "urlPath": ""
        },
        "refresh": 1,
        "regex": "",
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "1970-01-01T00:00:00.000Z",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "",
  "title": "Live",
  "uid": "livedash",
  "version": 1
}